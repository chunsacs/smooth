!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Smooth",[],t):"object"==typeof exports?exports.Smooth=t():e.Smooth=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=n(4),s=a.dash("transform"),l=a.dash("transition"),h=function(){function e(){i(this,e),this.VERSION="0.0.1";var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.handlers={run:null,debounce:null,resize:null},this.perfs={now:null,last:null},this.vars={preload:t.preload||!1,current:0,target:0,height:0,documentHeight:0,bounding:0,timer:null,ticking:!1},this.firstFrame=!0,this.ticketScroll=!1,this.smoothContainer=t.smoothContainer,this.smoothContainer&&(this.smoothSection={el:t.smoothSection?t.smoothSection:document.body,animation:{transform:[{transformType:"translate3d",axis:"y",ease:.15,initialValue:0}]}}),this.dom=document.body,this.fakeDiv=null,this.elementsParallaxe=[],this.elementsTrigger=[],this.resize()}return r(e,[{key:"init",value:function(){this.vars.preload&&this.preloadImages(),this.addEvents(),!this.vars.preload&&this.resize()}},{key:"start",value:function(){this.reflow(),this.raf=o(this.handlers.run)}},{key:"addElement",value:function(e){void 0!==e.animations&&this.elementsParallaxe.push(e),void 0!==e.trigger&&(e.triggered=!1,this.elementsTrigger.push(e))}},{key:"addElements",value:function(e){for(var t=0;t<e.length;t++)this.addElement(e[t])}},{key:"resetElements",value:function(e){this.elementsParallaxe=[],this.elementsTrigger=[],this.addElements(e),this.reflow()}},{key:"setTransformSequence",value:function(e){e.startValue=this.findStart(e.transform),e.endValue=this.findEnd(e.transform)}},{key:"preloadImages",value:function(){var e=Array.prototype.slice.call(this.dom.querySelectorAll("img"),0);e.forEach(function(t){var n=new Image;n.onload=function(n){e.splice(e.indexOf(t),1),0===e.length&&this.resize()}.bind(this),n.src=t.getAttribute("src")}.bind(this))}},{key:"debounce",value:function(){this.ticketScroll=!0}},{key:"addScrollingClass",value:function(){clearTimeout(this.vars.timer),this.vars.ticking||(this.vars.ticking=!0,this.dom.classList.add("is-scrolling")),this.vars.timer=setTimeout(function(){this.vars.ticking=!1,this.dom.classList.remove("is-scrolling")}.bind(this),200)}},{key:"run",value:function(){this.ticketScroll&&(this.vars.target=window.scrollY||window.pageYOffset,this.addScrollingClass(),this.ticketScroll=!1),this.vars.current=this.vars.target,this.vars.current<.1&&(this.vars.current=0),this.smoothContainer&&this.updatesmoothContainer(this.vars.current===this.vars.old),this.updateParallaxeElements(this.vars.current,this.vars.current===this.vars.old),this.vars.current!=this.vars.old&&this.checkTriggerElements(this.vars.current),this.vars.old=this.vars.current,this.raf=o(this.handlers.run)}},{key:"updatesmoothContainer",value:function(e){this.smoothSection.animation.transform[0].done&&e||(this.smoothSection.animation.properties=[],this.computeTransformStyle(this.smoothSection.animation,this.smoothSection.animation.transform[0],-this.vars.current),this.setStyle(this.smoothSection.el,this.smoothSection.animation.properties))}},{key:"updateParallaxeElements",value:function(e,t){for(var n=0;n<this.elementsParallaxe.length;n++)for(var i=this.elementsParallaxe[n],r=0;r<i.animations.length;r++){var o=i.animations[r],a=e<o.startValue,s=e>o.endValue;if(o.properties=[],a||s){if((a&&o.edge===-1||s&&1===o.edge)&&o.done)continue;if(o.edge=a?-1:1,o.transform){for(var l=!0,h=0;h<o.transform.length;h++){var u=o.transform[h];this.computeTransformStyle(o,u,o.edge===-1?u.initialValue:u.finalValue),u.done===!1&&(l=!1)}l===!0?o.done=!0:o.done=!1}else this.computeClassicStyle(o,o.edge===-1?o.initialValue:o.finalValue);o.properties.length>0&&this.setStyle(i.el,o.properties)}else if(!o.done||0!==o.edge||!t){o.edge=0;var l=!0;if(o.transform){for(var h=0;h<o.transform.length;h++){var u=o.transform[h],c=Math.min(Math.max((e-u.startValue)/(u.endValue-u.startValue),0),1),f=u.initialValue+(u.finalValue-u.initialValue)*c;this.computeTransformStyle(o,u,f),u.done===!1&&(l=!1)}l===!0?o.done=!0:o.done=!1}else{var c=(e-o.startValue)/(o.endValue-o.startValue),f=o.initialValue+(o.finalValue-o.initialValue)*c;this.computeClassicStyle(o,f)}o.properties.length>0&&this.setStyle(i.el,o.properties)}}}},{key:"checkTriggerElements",value:function(e){for(var t=0;t<this.elementsTrigger.length;t++){var n=this.elementsTrigger[t],i=e<n.startValue;if(n.isInit||(this.setStyle(n.el,n.transition,!0),n.isInit=!0),i){if(i&&n.edge===-1)continue;if(n.edge=i?-1:1,n.trigger.reset){for(var r=0;r<n.initialStyles.length;r++)this.setStyle(n.el,n.initialStyles[r],!0);n.triggered=!1}}else if(!n.triggered){n.edge=0,n.triggered=!0;for(var r=0;r<n.finalStyles.length;r++)this.setStyle(n.el,n.finalStyles[r].style,!0)}}}},{key:"computeTransformStyle",value:function(e,t,n){void 0===t.smoothValue?(t.smoothValue=t.initialValue,t.smoothValue+=n-t.smoothValue):t.smoothValue+=(n-t.smoothValue)*t.ease;var i=Math.round(1e3*t.smoothValue)/1e3;if(Math.round(1e3*n)/1e3===i?t.done=!0:t.done=!1,e.properties)for(var r=0;r<e.properties.length;r++)if(e.properties[r].property===t.transformType)return e.properties[r][t.axis]=i,!1;var o={property:t.transformType};o[t.axis]=i,e.properties.push(o)}},{key:"computeClassicStyle",value:function(e,t){void 0===e.smoothValue?(e.smoothValue=e.initialValue,e.smoothValue+=t-e.smoothValue):e.smoothValue+=(t-e.smoothValue)*e.ease;var n=Math.round(100*e.smoothValue)/100,i={property:e.property,value:n};Math.round(100*t)/100===n?e.done=!0:e.done=!1,e.properties.push(i)}},{key:"setStyle",value:function(e,t,n){if(!n)var t=this.parseStyle(t);"transform"===t[0]?e.style[s]=t[1]:"opacity"===t[0]?e.style.opacity=t[1]:"transition"===t[0]&&(e.style[l]=t[1])}},{key:"parseStyle",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];switch(i.property){case"translate3d":var r=i.x?i.x+"px":0,o=i.y?i.y+"px":0,a=i.z?i.z+"px":0;"transform"===t[0]?t[1]+=" translate3d("+r+","+o+","+a+")":(t[0]="transform",t[1]="translate3d("+r+","+o+","+a+")");break;case"scale3d":var r=i.x||i.both?i.x||i.both:1,o=i.y||i.both?i.y||i.both:1,a=i.z?i.z+"px":1;"transform"===t[0]?t[1]+=" scale3d("+r+","+o+","+a+")":(t[0]="transform",t[1]="scale3d("+r+","+o+","+a+")");break;case"rotate3d":var r=i.x||i.both?i.x||i.both:1,o=i.y||i.both?i.y||i.both:1,a=i.z?i.z+"px":1;"transform"===t[0]?t[1]+=" rotate("+r+","+o+","+a+")":(t[0]="transform",t[1]="rotate("+r+","+o+","+a+")");break;case"opacity":t.length>0?(t.push("opacity"),t.push(i.value)):(t[0]="opacity",t[1]=i.value)}}return t}},{key:"generateTransition",value:function(e){var t=[];t[0]="transition",t[1]="";for(var n=0;n<e.finalStyles.length;n++){var i=e.finalStyles[n];t[1]+=i.style[0]+" "+i.duration/1e3+"s "+i.easing+" "+i.delay/1e3+"s",n!=e.finalStyles.length-1&&(t[1]+=" , ")}return t}},{key:"addEvents",value:function(){console.log("addEvents this.handlers",this.handlers),this.handlers.debounce=this.debounce.bind(this),this.handlers.run=this.run.bind(this),window.addEventListener("scroll",this.handlers.debounce)}},{key:"removeEvents",value:function(){console.log("removeEvents this.handlers",this.handlers),window.removeEventListener("scroll",this.handlers.debounce),o.cancel(this.raf),this.handlers={run:null,debounce:null,resize:null}}},{key:"removeFakeScrollHeight",value:function(){this.fakeDiv.parentNode.removeChild(this.fakeDiv),this.fakeDiv=null,this.smoothSection.el.style.position="relative",this.smoothSection.el.style.width="auto",this.smoothSection.el.style.transform=""}},{key:"addFakeScrollHeight",value:function(e){null===this.fakeDiv?(this.fakeDiv=document.createElement("div"),this.fakeDiv.className="smooth-fake-scroll",this.fakeDiv.style.height=e+"px",this.smoothSection.el.parentNode.insertBefore(this.fakeDiv,this.smoothSection.el.nextSibling)):this.fakeDiv.style.height=e+"px",this.smoothSection.el.style.position="fixed",this.smoothSection.el.style.width="100%"}},{key:"addFakeHeight",value:function(e){this.dom.style.height=e+"px"}},{key:"removeFakeHeight",value:function(){this.dom.style.height="auto"}},{key:"scrollTo",value:function(e){}},{key:"getOffset",value:function(e){var t=this.dom.getBoundingClientRect(),n=e.getBoundingClientRect(),i=n.top-t.top;return i}},{key:"getPositionStart",value:function(e,t){if("in-viewport"===t.start){var n=this.getOffset(e),i=e.offsetHeight,r=this.vars.height,o=t.viewFactorStart?t.viewFactorStart:0;if(isNaN(o)&&o.indexOf("px")!==-1)var a=n-r+parseInt(t.viewFactorStart,10);else var a=n-r+i*o;return a>0?a:0}return t.start}},{key:"getPositionEnd",value:function(e,t){if("out-viewport"===t.end){var n=this.getOffset(e),i=e.offsetHeight,r=t.viewFactorEnd?t.viewFactorEnd:0,o=n+i-i*r;return o>this.vars.documentHeight-this.vars.height?this.vars.documentHeight-this.vars.height:o}return t.end}},{key:"findStart",value:function(e){var t,n=Number.MAX_VALUE,i=e.length;for(t=0;t<i;t++)e[t].startValue<n&&(n=e[t].startValue);return n}},{key:"findEnd",value:function(e){var t,n=0,i=e.length;for(t=0;t<i;t++)e[t].endValue>n&&(n=e[t].endValue);return n}},{key:"getDocumentHeight",value:function(){var e=this.dom,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}},{key:"reflow",value:function(){for(var e=0,t=0;t<this.elementsParallaxe.length;t++)for(var n=this.elementsParallaxe[t],i=0;i<n.animations.length;i++){var r=n.animations[i];if(r.transform)for(var o=0;o<r.transform.length;o++)r.transform[o].startValue=this.getPositionStart(n.el,r.transform[o]),r.transform[o].endValue=this.getPositionEnd(n.el,r.transform[o]);else r.startValue=this.getPositionStart(n.el,r),r.endValue=this.getPositionEnd(n.el,r);r.transform&&this.setTransformSequence(r),r.endValue>e&&(e=r.endValue)}for(var a=0;a<this.elementsTrigger.length;a++){var n=this.elementsTrigger[a];if(n.startValue=this.getPositionStart(n.el,n.trigger),n.trigger.initialValues){n.initialStyles=[];for(var t=0;t<n.trigger.initialValues.length;t++){var s=n.trigger.initialValues[t];n.initialStyles.push(this.parseStyle(s.animation))}}n.finalStyles=[];for(var t=0;t<n.trigger.finalValues.length;t++){var s=n.trigger.finalValues[t],l={delay:s.delay,duration:s.duration,easing:s.easing,style:this.parseStyle(s.animation)};n.finalStyles.push(l)}n.transition=this.generateTransition(n)}if(this.elementsTrigger.length>0&&this.checkTriggerElements(this.vars.current),this.smoothContainer){this.vars.bounding=this.smoothSection.el.getBoundingClientRect().height,this.addFakeScrollHeight(this.vars.bounding)}e>this.vars.documentHeight&&this.addFakeHeight(e)}},{key:"resize",value:function(){this.vars.height=document.documentElement.clientHeight||window.innerHeight,this.vars.width=document.documentElement.clientWidth||window.innerWidth,this.vars.documentHeight=this.getDocumentHeight(),this.reflow()}},{key:"destroy",value:function(){this.fakeDiv&&this.removeFakeScrollHeight(),this.removeFakeHeight(),this.removeEvents(),this.elementsTrigger.length=0,this.elementsTrigger=[],this.elementsParallaxe.length=0,this.elementsParallaxe=[]}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){(function(t){for(var i=n(2),r="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=r["request"+a],l=r["cancel"+a]||r["cancelRequest"+a],h=0;!s&&h<o.length;h++)s=r[o[h]+"Request"+a],l=r[o[h]+"Cancel"+a]||r[o[h]+"CancelRequest"+a];if(!s||!l){var u=0,c=0,f=[],d=1e3/60;s=function(e){if(0===f.length){var t=i(),n=Math.max(0,d-(t-u));u=n+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return f.push({handle:++c,callback:e,cancelled:!1}),c},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(r,e)},e.exports.cancel=function(){l.apply(r,arguments)},e.exports.polyfill=function(){r.requestAnimationFrame=s,r.cancelAnimationFrame=l}}).call(t,function(){return this}())},function(e,t,n){(function(t){(function(){var n,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-r)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},r=n()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(t,n(3))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(c===clearTimeout)return clearTimeout(e);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&s())}function s(){if(!v){var e=r(a);v=!0;for(var t=m.length;t;){for(d=m,m=[];++g<t;)d&&d[g].run();g=-1,t=m.length}d=null,v=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}var u,c,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(e){c=i}}();var d,m=[],v=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||v||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=h,f.addListener=h,f.once=h,f.off=h,f.removeListener=h,f.removeAllListeners=h,f.emit=h,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){"use strict";function n(e){return e in h?h[e]:h[e]=i(e)}function i(e){var t,n=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),i=s.length;if(void 0!==a[n])return n;for(n=r(e);i--;)if(t=s[i]+n,void 0!==a[t])return t;throw new Error("unable to prefix "+e)}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){var t=n(e),i=/([A-Z])/g;return i.test(t)&&(t=(l.test(t)?"-":"")+t.replace(i,"-$1")),t.toLowerCase()}var a=document.createElement("p").style,s="O ms Moz webkit".split(" "),l=/^(o|ms|moz|webkit)/,h={};e.exports=n,e.exports.dash=o}])});
//# sourceMappingURL=Smooth.min.js.map